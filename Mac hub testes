-- Carregar a biblioteca Fluent e addons necessários
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

-- Criar a janela principal Fluent
local Window = Fluent:CreateWindow({
    Title = "Mac Hub - Fluent",
    SubTitle = "by dawid",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl
})

-- Criar as abas principais
local Tabs = {
    Main = Window:AddTab({ Title = "Main" }),
    Teleport = Window:AddTab({ Title = "Teleporte" }),
    ESP = Window:AddTab({ Title = "ESP" }),
    Inventory = Window:AddTab({ Title = "Inventário" }),
    Kill = Window:AddTab({ Title = "Kill" }),
    Flight = Window:AddTab({ Title = "Fly" }),
    Settings = Window:AddTab({ Title = "Settings" })
}

-- Adicionar botão de minimizar com logo
local minimizeButton = Instance.new("ImageButton")
minimizeButton.Name = "MinimizeButton"
minimizeButton.Size = UDim2.new(0, 40, 0, 40)
minimizeButton.Position = UDim2.new(0, 10, 0, 10) -- Ajuste a posição conforme necessário
minimizeButton.BackgroundTransparency = 1
minimizeButton.Image = "rbxassetid://9265687331" -- Substitua pelo ID da sua imagem/logo
minimizeButton.Parent = Window:GetFrame()

-- Conexão para minimizar e restaurar a interface
local isMinimized = false
minimizeButton.MouseButton1Click:Connect(function()
    if not isMinimized then
        Window:GetFrame().Visible = false
        isMinimized = true
        Fluent:Notify({
            Title = "Interface Minimizada",
            Content = "Pressione novamente para restaurar.",
            Duration = 5
        })
    else
        Window:GetFrame().Visible = true
        isMinimized = false
        Fluent:Notify({
            Title = "Interface Restaurada",
            Content = "Interface foi restaurada com sucesso.",
            Duration = 5
        })
    end
end)

-- Variáveis globais
local selectedPlayer = nil
local autoTeleportEnabled = false

-- Função para adicionar Dropdown de Seleção de Jogador
local function AddPlayerDropdown(tab)
    local Dropdown = tab:AddDropdown("PlayerDropdown", {
        Title = "Selecionar Jogador",
        Description = "Selecione um jogador para teleportar ou flingar.",
        Values = {},
        Multi = false,
        Default = nil
    })

    local function UpdatePlayers()
        local players = {}
        for _, player in pairs(game.Players:GetPlayers()) do
            table.insert(players, player.Name)
        end
        Dropdown:SetValues(players)
    end

    UpdatePlayers()
    game.Players.PlayerAdded:Connect(UpdatePlayers)
    game.Players.PlayerRemoving:Connect(UpdatePlayers)

    Dropdown:OnChanged(function(value)
        for _, player in pairs(game.Players:GetPlayers()) do
            if player.Name == value then
                selectedPlayer = player
                print("Jogador selecionado: " .. player.Name)
            end
        end
    end)
end

-- Adicionar Dropdown de Seleção na aba Teleport
AddPlayerDropdown(Tabs.Teleport)

-- Botão para teleportar ao jogador selecionado
Tabs.Teleport:AddButton({
    Title = "Teleportar",
    Description = "Teleporta até o jogador selecionado.",
    Callback = function()
        if selectedPlayer and selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local localPlayer = game.Players.LocalPlayer
            if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
                localPlayer.Character.HumanoidRootPart.CFrame = selectedPlayer.Character.HumanoidRootPart.CFrame
                print("Teleportado para o jogador selecionado.")
            end
        else
            print("Nenhum jogador selecionado ou jogador inválido.")
        end
    end
})

-- Botão Flingar
Tabs.Teleport:AddButton({
    Title = "Flingar",
    Description = "Flinga o jogador selecionado com auto teleporte.",
    Callback = function()
        if selectedPlayer and selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local localPlayer = game.Players.LocalPlayer

            -- Auto Teleporte com delay de 0.1 segundo
            task.spawn(function()
                while autoTeleportEnabled do
                    if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
                        localPlayer.Character.HumanoidRootPart.CFrame = selectedPlayer.Character.HumanoidRootPart.CFrame
                        print("Teleportado automaticamente para: " .. selectedPlayer.Name)
                    end
                    task.wait(0.1)
                end
            end)

            -- Executar o comando de Flingar
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Execute666j/TESTE/refs/heads/main/FlingAtivar"))()
            print("Fling ativado com auto teleporte.")
        else
            print("Nenhum jogador selecionado ou jogador inválido.")
        end
    end
})

-- Configuração SaveManager e InterfaceManager
SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent)

SaveManager:SetFolder("FluentScriptHub")
InterfaceManager:SetFolder("FluentScriptHub/specific-game")

InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)

SaveManager:LoadAutoloadConfig()

-- Notificar o usuário
Fluent:Notify({
    Title = "Fluent",
    Content = "O script foi carregado corretamente.",
    Duration = 8
})
