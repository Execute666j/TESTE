-- Carregar biblioteca Fluent
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

-- Criar janela principal
local Window = Fluent:CreateWindow({
    Title = "Mac Hub",
    SubTitle = "Hub de Trolls",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl
})

-- Seções substituindo as abas
local TrollSection = Window:AddSection({ Title = "Trollando Web Casal" })
local TeleportSection = Window:AddSection({ Title = "Teleporte" })
local InventorySection = Window:AddSection({ Title = "Inventário" })
local SettingsSection = Window:AddSection({ Title = "Configurações" })

-- Função para atualizar a lista de jogadores
local PlayersList = {}
local selectedPlayer = nil

local function UpdatePlayers()
    PlayersList = {}
    for _, player in pairs(game.Players:GetPlayers()) do
        table.insert(PlayersList, player.Name)
    end
    return PlayersList
end

-- Função para teletransportar para um jogador
local function TeleportToPlayer(targetName)
    local targetPlayer = game.Players:FindFirstChild(targetName)
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local targetPosition = targetPlayer.Character.HumanoidRootPart.Position
        local localPlayer = game.Players.LocalPlayer
        if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
            localPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(targetPosition)
            print("Teleportado para " .. targetName)
        end
    else
        print("Jogador alvo não encontrado ou inválido.")
    end
end

-- Seção Teleporte
TeleportSection:AddDropdown("Selecionar Jogador", {
    Title = "Selecionar Jogador",
    Values = UpdatePlayers(),
    Default = "",
    Multi = false,
    Callback = function(Value)
        selectedPlayer = Value
        print("Jogador selecionado: " .. Value)
    end
})

TeleportSection:AddButton({
    Title = "Atualizar Lista",
    Callback = function()
        local dropdown = Fluent.Options["Selecionar Jogador"]
        dropdown:SetValues(UpdatePlayers())
        print("Lista de jogadores atualizada.")
    end
})

TeleportSection:AddButton({
    Title = "Flingar",
    Callback = function()
        if selectedPlayer then
            TeleportToPlayer(selectedPlayer) -- Teleportar antes do fling
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Execute666j/TESTE/refs/heads/main/FlingAtivar"))()
            print("Fling ativado para " .. selectedPlayer)
        else
            print("Nenhum jogador selecionado!")
        end
    end
})

-- Seção Troll
TrollSection:AddButton({
    Title = "Fly",
    Description = "Ativa o modo de voo.",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/mikeexc/Dsc-Mike-Fly-Gui/main/Fly%20Gui"))()
        print("Fly ativado.")
    end
})

TrollSection:AddButton({
    Title = "ESP",
    Description = "Ativa o ESP para jogadores.",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Execute666j/TESTE/refs/heads/main/ESP"))()
        print("ESP ativado.")
    end
})

TrollSection:AddButton({
    Title = "Kill",
    Description = "Executa o comando Kill.",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Execute666j/TESTE/refs/heads/main/Kill"))()
        print("Kill ativado.")
    end
})

-- Seção Inventário
InventorySection:AddButton({
    Title = "Pegar Todos os Itens",
    Callback = function()
        local player = game.Players.LocalPlayer
        local backpack = player.Backpack
        for _, item in pairs(backpack:GetChildren()) do
            item.Parent = player.Character
        end
        print("Todos os itens foram movidos para o personagem.")
    end
})

-- Configurações
InterfaceManager:SetLibrary(Fluent)
SaveManager:SetLibrary(Fluent)

SaveManager:SetFolder("MacHubConfigs")
InterfaceManager:SetFolder("MacHubConfigs")

InterfaceManager:BuildInterfaceSection(SettingsSection)
SaveManager:BuildConfigSection(SettingsSection)

-- Inicialização
Window:SelectTab(1)

Fluent:Notify({
    Title = "Mac Hub",
    Content = "Script carregado com sucesso.",
    Duration = 8
})
