local ESPEnabled = false

local function ToggleESP()
    ESPEnabled = not ESPEnabled
    if ESPEnabled then
        for _, player in pairs(game.Players:GetPlayers()) do
            if player ~= game.Players.LocalPlayer then
                local highlight = Instance.new("Highlight")
                highlight.Parent = player.Character
                highlight.FillColor = Color3.fromRGB(255, 255, 0) -- Cor amarela
                highlight.FillTransparency = 0.5
                highlight.OutlineTransparency = 1

                -- Adicionando hitbox
                local hitbox = Instance.new("BoxHandleAdornment")
                hitbox.Parent = player.Character
                hitbox.Adornee = player.Character.HumanoidRootPart
                hitbox.Size = player.Character.HumanoidRootPart.Size
                hitbox.Color3 = Color3.fromRGB(255, 255, 0) -- Cor amarela
                hitbox.Transparency = 0.5
                hitbox.AlwaysOnTop = true
            end
        end
    else
        for _, player in pairs(game.Players:GetPlayers()) do
            if player ~= game.Players.LocalPlayer then
                if player.Character:FindFirstChildOfClass("Highlight") then
                    player.Character:FindFirstChildOfClass("Highlight"):Destroy()
                end
                if player.Character:FindFirstChildOfClass("BoxHandleAdornment") then
                    player.Character:FindFirstChildOfClass("BoxHandleAdornment"):Destroy()
                end
            end
        end
    end
end

-- Exemplo de como usar loadstring para ativar o ESP
loadstring([[
    local ESPEnabled = false

    local function ToggleESP()
        ESPEnabled = not ESPEnabled
        if ESPEnabled then
            for _, player in pairs(game.Players:GetPlayers()) do
                if player ~= game.Players.LocalPlayer then
                    local highlight = Instance.new("Highlight")
                    highlight.Parent = player.Character
                    highlight.FillColor = Color3.fromRGB(255, 255, 0) -- Cor amarela
                    highlight.FillTransparency = 0.5
                    highlight.OutlineTransparency = 1

                    -- Adicionando hitbox
                    local hitbox = Instance.new("BoxHandleAdornment")
                    hitbox.Parent = player.Character
                    hitbox.Adornee = player.Character.HumanoidRootPart
                    hitbox.Size = player.Character.HumanoidRootPart.Size
                    hitbox.Color3 = Color3.fromRGB(255, 255, 0) -- Cor amarela
                    hitbox.Transparency = 0.5
                    hitbox.AlwaysOnTop = true
                end
            end
        else
            for _, player in pairs(game.Players:GetPlayers()) do
                if player ~= game.Players.LocalPlayer then
                    if player.Character:FindFirstChildOfClass("Highlight") then
                        player.Character:FindFirstChildOfClass("Highlight"):Destroy()
                    end
                    if player.Character:FindFirstChildOfClass("BoxHandleAdornment") then
                        player.Character:FindFirstChildOfClass("BoxHandleAdornment"):Destroy()
                    end
                end
            end
        end
    end

    ToggleESP()
]])()
